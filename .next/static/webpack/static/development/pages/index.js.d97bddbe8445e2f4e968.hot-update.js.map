{"version":3,"file":"static/webpack/static/development/pages/index.js.d97bddbe8445e2f4e968.hot-update.js","sources":["webpack:///./pages/index.tsx"],"sourcesContent":["import React, { Component, createRef, Fragment } from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport Grid from '@material-ui/core/Grid';\nimport IconButton from '@material-ui/core/IconButton';\nimport InputBase from '@material-ui/core/InputBase';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport Avatar from '@material-ui/core/Avatar';\nimport SearchIcon from '@material-ui/icons/Search';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { fromEvent } from 'rxjs';\nimport { map, mergeMap, debounceTime, distinctUntilChanged, tap, partition } from 'rxjs/operators';\nimport { ajax } from 'rxjs/ajax';\n\nconst styles = (theme) => ({\n  root: {\n    padding: theme.spacing.unit * 2,\n    textAlign: 'center',\n    width: 400,\n    margin: '16px auto 0 auto',\n    color: theme.palette.text.secondary,\n  },\n  search: {\n    textAlign: 'center',\n    display: 'flex',\n    alignItems: 'center',\n  },\n  input: {\n    marginLeft: 8,\n    flex: 1,\n  },\n  iconButton: {\n    padding: 10,\n  },\n  divider: {\n    width: 1,\n    height: 28,\n    margin: 4,\n  },\n  list: {\n    width: '100%',\n    maxWidth: 360,\n    backgroundColor: theme.palette.background.paper,\n  },\n  progress: {\n    margin: `${theme.spacing.unit * 2 }px auto`,\n  },\n  gitIcon: {\n    width: 48,\n    height: 48,\n    position: 'absolute',\n    right: 24,\n    padding: 12,\n  }\n});\n\nclass Index extends Component<any> {\n  searchRef = createRef();\n  keyup$;\n  user$;\n  state = {\n    isLoading: false,\n    userList: []\n  };\n\n  componentDidMount() {\n    // search input event handler\n    this.keyup$ = fromEvent(this.searchRef.current as any, 'keyup')\n      .pipe(\n        debounceTime(300),\n        map((event: React.ChangeEvent<HTMLInputElement>) => event.target.value),\n        distinctUntilChanged(),\n      );\n\n    // partition reset or rendering by search value\n    let [user$, reset$] = this.keyup$\n      .pipe(\n        partition((query: string) => query.trim().length > 0),\n      );\n\n    // should return json data after api call\n    this.user$ = user$\n      .pipe(\n        tap(this.showLoading),\n        mergeMap((query: string) => ajax.getJSON(`https://api.github.com/search/users?q=${query}`)),\n        tap(this.hideLoading),\n      );\n\n    // subscribe date to ui rendering\n    this.user$.subscribe({\n      next: userList => this.setState({\n        userList: userList.items.length > 0 ? this.userListItem(userList.items) : this.userNoItem()\n      }),\n      error: (error: Error) => {\n        console.error(error);\n        alert(error.message);\n      }\n    });\n\n    // search value reset\n    reset$\n      .pipe(\n        tap(() => this.setState({\n          userList: []\n        })),\n        tap(v => console.log('from reset$', v))\n      )\n      .subscribe();\n  }\n\n  componentWillUnmount() {\n    this.user$.unsubscribe();\n  }\n\n  userListItem = (items) => items.map(user => (\n    <ListItem key={user.id} alignItems='flex-start'>\n      <ListItemAvatar>\n        <Avatar alt='Remy Sharp' src={user.avatar_url} />\n      </ListItemAvatar>\n      <ListItemText primary={user.login}/>\n    </ListItem>\n  ));\n\n  userNoItem = () => (\n    <ListItem alignItems='center'>\n      <ListItemText primary='No User'/>\n    </ListItem>\n  );\n\n  showLoading = () => {\n    this.setState({\n      isLoading: true\n    })\n  };\n\n  hideLoading = () => {\n    this.setState({\n      isLoading: false\n    })\n  };\n\n  render() {\n    const classes = styles(this.props.pageContext.theme);\n\n    return (\n      <Fragment>\n        <AppBar position='static'>\n          <Toolbar>\n            <Typography variant='h6' color='inherit'>\n              Gitgub User Search UI\n            </Typography>\n            <a style={classes.gitIcon} href='https://github.com/mui-org/material-ui' aria-label='GitHub repository' data-ga-event-category='AppBar' data-ga-event-action='github' title=''>\n              {/*<span>*/}\n                <svg fill={'#fff'} focusable='false' viewBox='0 0 24 24' aria-hidden='true' role='presentation'>\n                  <path d='M12 .3a12 12 0 0 0-3.8 23.4c.6.1.8-.3.8-.6v-2c-3.3.7-4-1.6-4-1.6-.6-1.4-1.4-1.8-1.4-1.8-1-.7.1-.7.1-.7 1.2 0 1.9 1.2 1.9 1.2 1 1.8 2.8 1.3 3.5 1 0-.8.4-1.3.7-1.6-2.7-.3-5.5-1.3-5.5-6 0-1.2.5-2.3 1.3-3.1-.2-.4-.6-1.6 0-3.2 0 0 1-.3 3.4 1.2a11.5 11.5 0 0 1 6 0c2.3-1.5 3.3-1.2 3.3-1.2.6 1.6.2 2.8 0 3.2.9.8 1.3 1.9 1.3 3.2 0 4.6-2.8 5.6-5.5 5.9.5.4.9 1 .9 2.2v3.3c0 .3.1.7.8.6A12 12 0 0 0 12 .3'/>\n                </svg>\n              {/*</span>*/}\n            </a>\n          </Toolbar>\n        </AppBar>\n        <Paper style={classes.root as React.CSSProperties} elevation={1}>\n\n          <Grid container>\n            <Grid item xs={12} style={classes.search as React.CSSProperties}>\n              <InputBase\n                inputRef={this.searchRef}\n                style={classes.input}\n                placeholder='Search Github User Profile'\n              />\n              <IconButton style={classes.iconButton} aria-label='Search'>\n                <SearchIcon />\n              </IconButton>\n            </Grid>\n            <Grid item xs={12}>\n              <List style={classes.list}>\n                {this.state.isLoading\n                  ? <CircularProgress style={classes.progress}/>\n                  : this.state.userList\n                }\n              </List>\n            </Grid>\n          </Grid>\n        </Paper>\n      </Fragment>\n    );\n  }\n}\n\nexport default Index;"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AAFA;AAIA;AACA;AADA;AAGA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AAHA;AAKA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AACA;AALA;AAjCA;AAAA;AACA;AAyCA;;;;;;;;;;;;;;;;;AACA;AAGA;AACA;AACA;AAFA;AACA;AAqDA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AALA;AAAA;AACA;AAQA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAFA;AACA;AAKA;AACA;AACA;AADA;AAGA;AACA;AACA;AACA;AACA;AADA;AAGA;AACA;;;;;;AA3EA;AAAA;AACA;AAAA;AACA;AAGA;AAAA;AACA;AANA;AAYA;AAAA;AAZA;AAAA;AAAA;AACA;AACA;AAcA;AAGA;AAAA;AACA;AAIA;AACA;AAAA;AACA;AADA;AAAA;AAGA;AACA;AACA;AACA;AAPA;AACA;AAUA;AAEA;AACA;AADA;AAAA;AAGA;AAAA;AAGA;;;AAEA;AACA;AACA;;;AA6BA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASA;;;;AAjIA;AACA;AAmIA;;;;A","sourceRoot":""}